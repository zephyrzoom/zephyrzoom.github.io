---
layout: post
title: Javascript
date: 2016-08-06 20:12:00 +0800
---

#Javascript

##作用域

作用域是引擎执行中寻找变量的区域。

JS使用JIT的编译方式，如：`var a = 2;`，编译器时只会处理声明`var a;`，当执行时才会处理赋值`a = 2;`。

引擎在执行代码时会不停地寻找左值(LHS)与右值(RHS)，先在最近的作用域寻找，找不到再到外层作用域，直到找到。

```javascript
function foo(a) {
    console.log(a + b);
    b = a;
}
foo(2);
```
这段代码中LHS有：`a = ...`(调用函数时隐含的)，`b = ..`，RHS有：`foo(..`，`console`，
`a + ..`，`.. + b`，`.. = a`。左值右值不只是在等号左右的值。函数的定义并没有进行赋值，
只是在调用时才会用到的代码块。

这段代码执行`a + b`时，引擎在查找右值b时，首先在foo函数作用域中找，没有找到，再到全局查找，
依然没有，这时会抛出ReferenceError异常。而如果是`b = a`的左值b时，当全局也没找到时，
会创建一个全局变量b。但是，如果在`strict mode`下执行则也会产生ReferenceError异常。
